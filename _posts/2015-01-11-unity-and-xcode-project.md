---
layout: post
title: "1st Week on 2015"
date: 2015-01-11 00:00:00
categories: unity android xcode erros

---

## Errors on this week

### RubyGem Xcodeproj can't parse Info.plist exported from Unity project

Message:

`invalid byte sequence in US-ASCII (ArgumentError)`

When:

Parsing Info.plist with Xcodeproj::PlistHelper

Why:

There are non US-ASCII characters included in the plist file.

How to solve it:

Set encoding type implicitly.

```
Encoding.default_external = Encoding::UTF_8
Encoding.default_internal = Encoding::UTF_8
```

from [stackoverflow](http://stackoverflow.com/questions/17031651/invalid-byte-sequence-in-us-ascii-argument-error-when-i-run-rake-dbseed-in-ra)


### Installing Gem libv8 fails again & again

Message:

`libv8 did not install properly, expected binary v8 archive`

When:

bundle install (while Installing libv8)

Why:

Mac OSX is using a compiler with GCC v4.8 and that's not supported officialy in libv8

How to solve it:

Doesn't work... :(

```
$ brew install v8
$ bundle config build.libv8 --with-system-v8
```

Doesn't work... :(

```
$ gem uninstall libv8
$ brew install v8
$ gem install therubyracer
$ gem install libv8 -v '3.16.14.3' -- --with-system-v8
```

It works!

```
$ rm Gemfile.lock
$ bundle install
```

Conclusion:

If you use Gemfile writen on other machines, it may fail to install gem that depends on system version.

### Recent Android SDK requires JDK 7

Message:

`compileSdkVersion android-21 requires compiling with JDK 7`

When:

Compile Android application on OSX.

Why:

    $ java -version
    java version "1.6.0_65"
    Java(TM) SE Runtime Environment (build 1.6.0_65-b14-466.1-11M4716)
    Java HotSpot(TM) 64-Bit Server VM (build 20.65-b04-466.1, mixed mode)
    
    $ javac -version
    javac 1.6.0_65

How to solve it:

1. Get JDK 7 from [Oracle | Technology Network](http://www.oracle.com/technetwork/java/javase/downloads/index-jsp-138363.html)
2. Ensure that the JDK 7 is installed at `/Library/Java/JavaVirtualMachines/`
3. Open "Project Structure" on AS (cmd + ;)
4. Set "JDK Location" to `/Library/Java/JavaVirtualMachines/jdk1.7.0_71.jdk/Contents/Home`
5. Shutdown & Re-Open AS

/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home

### The AndroidManifest exported from Unity includes @icon property

Message:

`Attribute application@icon value=(@drawable/app_icon) from AndroidManifest.xml`

[http://stackoverflow.com/questions/24112897/android-studio-6-0-merger-fail](http://stackoverflow.com/questions/24112897/android-studio-6-0-merger-fail)

### The AndroidManifest exported from Unity doens't have Theme property

Message:

`You need to use a Theme.AppCompat theme (or descendant) with this activity.`

When:

Open the Blank Activity generated by Android Studio.

Why:

No theme is included on the AndroidManifest.xml exported from Unity.

How to solve it:

1. Add theme to application tag on the Manifest

    ```
    <application android:label="@string/app_name" android:theme="@style/Theme.AppCompat">
       ...
    </application>
    ```

### Can't use ButterKnife within AndroidLibrary project

Message:

`attribute value must be constant`

When:

Compiling project that uses ButterKnife

Why:

ButterKnife doesn't support use in library projects

[GitHub Issues | Injection does not work in library project](https://github.com/JakeWharton/butterknife/issues/100)

How to solve it:

Throw ButterKnife away with sorrow :(

## Appendix : Environment

Environment:

    $ sw_vers
    ProductName:	Mac OS X
    ProductVersion:	10.10.1
    BuildVersion:	14B25
    
    $ rbenv -v
    rbenv 0.4.0-95-gf71e227
    
    $ ruby -v
    ruby 2.1.1p76 (2014-02-24 revision 45161) [x86_64-darwin14.0]
    
    $ gem -v
    2.2.2
